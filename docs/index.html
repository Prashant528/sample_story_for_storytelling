<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Story</title>
    <style>
        body {
            display: flex;
            height: 100vh;
            margin: 0;
        }

        p {
            font-size: large;
        }

        a {
            color: #04AA6D; /* Set the text color to a specific color (e.g., blue) */
            text-decoration: none; /* Remove underlines from links */
            font-weight: bold; /* Make the text bold */
            transition: color 0.3s ease; /* Add a smooth color transition on hover */
        }

        a:hover {
            color: #1d7e5b; /* Change the text color on hover */
        }

        #right-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            border-right: 1px solid #ccc;
        }

        #upper-subsection {
            flex: 1;
            /* Add styles for the graph container */
        }

        #lower-subsection {
            /* Add styles for the unordered list */
        }

        #left-section {
            flex: 1;
            padding: 20px;
        }

        #story-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        #story-content {
            /* Add styles for the story content */
        }


        button {
            background-color: #04AA6D; /* Green */
            border: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            width: 70%;
            cursor: pointer;
            }

            #navigation-buttons {
                position: fixed;
                bottom: 10px;
                left: 40%;
                display: flex;
            }

        #next-button {
            margin-left: auto; /* Pushes the 'Next' button to the right */
        }

        #previous-button {
            margin-right: 10px;
        }
        div.scroll {
            margin: 4px, 4px;
            padding: 4px;
            height: 80px;
            overflow-x: auto;
            overflow-y: auto;
            text-align: justify;
             ;
        }
        div.scroll2 {
            margin: 4px, 4px;
            padding: 4px;
            height: 180px;
            overflow-x: hidden;
            overflow-y: auto;
            text-align: justify;
        }

        .image_padded {
            padding-left: 150px;
        }

        .image_non_padded {
            padding-left: 0px;
        }

        #story-image {
            max-width: 70%;
        }

        #page_image {
            max-width: 100%;
            height: auto; /* This property ensures the aspect ratio is preserved */
}
    </style>
</head>
<body>
    <div id="left-section">
        <div id="story-title">Kitty and her dragon</div>
        <div id="story-content">
        </div>

        <div id="story-image">
            <img id="page_image" src="new_exports/image_10.png" alt="Image 1" class="">
        </div>

        <div id="navigation-buttons">
            <button id="previous-button">&#9665;</button>
            <button id="next-button">&#9655;</button>
        </div>
    </div>

    <div id="right-section">
        <div id="upper-subsection" class="scroll">
            <!-- Add your control flow diagram here -->
            <!-- You can use a library like D3.js or Chart.js for the graph -->
            <!-- You can load mermaid from mermaid_backup here-->
            <img id="image" src="tmp_2/graphs_kitty-8.png" alt="Image 1" class="">
        
            <script type="module">
            import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
            mermaid.initialize({ startOnLoad: true });

            const storyPages = [
            // Each element of this array represents a page in the story
            `<p> 
                This is a story about the process of making a contribution to the OSS projects.
                <br><br><br> Click next to start the story...
                </p>
            `,
            `Page:1
            <p> 
                Once upon a time in the mystical land, there lived a curious and determined girl named Kitty who was in love with books, 
                magic and mythical creatures. 
                One day, she stumbled upon a fascinating book about dragons, the secrets of the code-knitters and their magical spells. 
                Intrigued by the prospect of summoning her own <b>ice-dragon</b>, Kitty delved into the world of <b>code-knitters</b>.
                `,
                `
                Page:2
                <p>
                    The code-knitters, a unique species, possessed the power to create <b>spells</b> and summon magnificent dragons. 
                    They lived harmoniously in their tiny kingdoms called "<b>Codelands</b>", knitting the spells together.  
                    Kitty also learned that these code-knitters were always on 
                    the lookout for new members to join their ranks and contribute to the summoning 
                    of even mightier dragons. Each Codeland had a special book called <b>The Golden Book</b>. It was not enough for a code-knitter
                     to create new magical spells to summon a dragon. They could summon one only if they were
                     able to add their magic spell to the Golden Book of the Codeland.
                </p>
                </p>`,
                `
                Page:3
                

                <p>
                    As she dived deeper and deeper into the book, she became more and more eager to summon a pet dragon of herself.
                    She realized that she now had to become a citizen of one of the <b>Codeland</b> kingdoms soon.
                    </p>
                    <p>
                     She traveled through the Codelands, observing the dragons they were summoning. As she had guessed, it was hard 
                     to find Codelands that summoned ice dragons like she wanted. After a long and tiring journey, she decided to rest
                     on the top of a hill. Little did she know that she was in for a pleasant surprise.
                     </p>
                     <p>
                     She was flabbergasted by what she could saw from there -- there were code-knitters riding huge ice dragons and
                     circling a fortified city full of hustle and bustle. She could see the whole <b>layout</b> of the city where the
                     code-knitters were assembling in groups and working furiously to summon bigger dragons.
                     After all the hardships, she had finally found her Codeland.

                </p>`,
                `
                Page:4
                <p> 
                    Kitty was excited and wasted no time to explore the Codeland. All of the code-knitters were friendly and
                    she was given a <b>handbook</b> that she read to find helpful information about the Codeland and the dragons.
                    She found out that the code-knitters had a tradition of gathering in large <b>forums</b> to discuss 
                    spells, dragons, and other magical matters. Though warmly welcomed into the group, 
                    Kitty found it a bit challenging to grasp the complexities of their discussions. 
                    Undeterred, she decided to navigate the new kingdom, acknowledging that some 
                    tasks would indeed be complex for her.
                </p>
                `,
            `Page:5
            <p>
                Determined, Kitty sought the guidance of a <b>mentor</b> who taught new citizens. 
                He  welcomed her and showed her the treasured Golden Codebook of the Codeland.
                He also provided insights into the <b>history of the codebook</b>
                and the <b>behaviors expected</b> in the kingdom. He emphasized the importance of
                understanding the spells already existing in Golden Codebook created by fellow code-knitters
                 to enhance her chances of summoning mightier dragons.
                </p>
            `,
            `
            Page:6
                <p>
                    Venturing into the kingdom, Kitty experienced both ecstasy and nervousness. 
                    Her love for book and her curiousness drove her to the library of the kingdom.
                     There, she devoured the books, the <b>scriptures</b> describing the spells in the Golden Codebook
                      and also discovered that even the kingdom of code-knitters
                      faced problems â€” there were <b>issues</b> in the codebook and the dragons could have used some
                      more finessing. She found a huge catalog of these issues.
                    

                </p>`,
                `
                Page:7
                <p>
    
                    Staying with the mentor, Kitty learned the intricacies of the Golden Codebook. The most shocking event
                    in her whole journey was when he told her that the no new citizen can add any new pages to the 
                    Golden Codebook.
                    How was she supposed to add spells to the Golden Codebook to summon the dragon if she could't add any
                    pages to the Golden Codebook?
                    </p>
                    <p>
                        The mentor was delighted by the brilliance of her question. The answer was that the Golden Codebook
                        already had magical pages that could hold infinite spells but the spells could be added only via the 
                        <b>Silver Codebook</b>.
                        The Silver Codebook was an exact replica of the Golden Codebook but 
                    adding magic spells there didn't really summon a dragon. However, she could create new pages in the Silver
                    Codebook and later ask the mentor or any other elders to add those spells to the Golden Book.
                    </p>
                    `,
                    `
                    Page: 8
                    <p>
                    Kitty was very glad when she received a Silver Codebook where she could make her changes but making changes in
                    Silver started becoming a bit unwieldy as there were a lots of hit and trials in the beginning. To solve that
                    problem, Kitty got an idea. She would <b>clone</b> the Silver Codebook to a <b>Wooden Codebook</b> and make changes there.
                    The wood was a perfect material to experiment upon, handy and she could carry it anywhere. 
                    When she felt satisfied with a new spell in the Wooden Codebook, she could then update
                    the Silver Codebook with those changes. 
                </p>`,
                `
                Page:9
                <p>
                    After getting the hang of the different books, Kitty wanted to focus on solving the issues of the Codeland
                    to win the favor of the elders and other fellow code-knitters.
                    Most problems were deeply magical and incomprehensible for her level, but Kitty stumbled upon 
                    a few that she could understand and solve. Excited at the prospect of obtaining 
                    her own dragon, she picked a manageable issue, consulted fellow code-knitters, and 
                    tirelessly experimented in her wooden codebook. After a long trial, it finally seemed 
                    to work, her <b>first magic spell</b>.
                </p>`,
                `
                Page:10
                    <p>
                Confident in her new spell, Kitty <b>updated the changes</b> in a new page of her Silver Codebook.
                She then made a <b>request to merge</b> her spells to the Golden Codebook. An elder
                meticulosly checked her spells and finally obliged to merge her request.
                A small whirl of wind appeared above Kitty and just like that, Kitty now had her small, exquisite pet
                 <b>dragon</b>. 
                 </p>
                 <p> She was delighted but her ambitions flew higher than her pet dragon.
                     She now wanted to aim for something grander and set her sights on acquiring even bigger and more powerful dragons 
                 in the enchanting world of code-knitters. The journey of Kitty, the aspiring code-knitter,
                  had only just begun.
                </p>`,
            // Add more pages as needed
        ];

        const mermaidCodeArray = [
            "graph TD;A[<a href='http://google.com'>main</a>]"
            ,"graph TD;A[<a href='http://google.com'>main</a>] --> B[<a href='http://google.com'>fitness_tracker</a>];A --> C[<a href='http://google.com'>screen_tracker</a>]"
            ,"graph TD;A[<a href='http://google.com'>main</a>] --> B[<a href='http://google.com'>fitness_tracker</a>];A --> C[<a href='http://google.com'>screen_tracker</a>];B --> D[<a href='http://google.com'>exercise_tracker</a>];B --> E[<a href='http://google.com'>meal_tracker</a>]"
        ];

        
        const images = [
                'tmp_2/graphs_kitty-1.png',
                'tmp_2/graphs_kitty-2_1.png',
                'tmp_2/graphs_kitty-2_2.png',
                'tmp_2/graphs_kitty-3.png',
                'tmp_2/graphs_kitty-4_1.png',
                'tmp_2/graphs_kitty-4_2.png',
                'tmp_2/graphs_kitty-5.png',
                'tmp_2/graphs_kitty-6.png',
                'tmp_2/graphs_kitty-7.png',
                'tmp_2/graphs_kitty-8.png',
            ];

            const page_images = [
                'new_exports/image_1.png',
                'new_exports/image_2.png',
                'new_exports/image_3.png',
                'new_exports/image_4.png',
                'new_exports/image_5.png',
                'new_exports/image_6.png',
                'new_exports/image_7.png',
                'new_exports/image_8.png',
                'new_exports/image_9.png',
                'new_exports/image_10.png',
            ];


        let currentPage = 0;

        function scrollToBottom() {
                var element = document.getElementById('upper-subsection');
                element.scrollTop = 1202;
                console.log("element scroll = ", element.scrollHeight)
            }

            function scrollToTop() {
                var element = document.getElementById('upper-subsection');
                element.scrollTop = 0;
            }

        // Display the initial story content
        document.getElementById('story-content').innerHTML = storyPages[currentPage];
        const imageElement = document.getElementById('image').innerHTML;

        // document.getElementById('mermaid').innerHTML = mermaidCodeArray[currentPage];


        // Add event listener for the 'Next' button
        document.getElementById('next-button').addEventListener('click', () => {
            if (currentPage < storyPages.length - 1) {
                const imageElement = document.getElementById('image');
                const fiction_imageElement = document.getElementById('page_image');

                currentPage++;
                document.getElementById('story-content').innerHTML = storyPages[currentPage];

                if(currentPage==0){
                    imageElement.src = images[9];
                    fiction_imageElement.src = page_images[9];
                    console.log("Current page = ", currentPage-1);
                    console.log("Story image = ", page_images[9] );

                }
                else{
                    console.log("Current page = ", currentPage-1);
                    imageElement.src = images[currentPage-1];
                    console.log("Graph image = ", images[currentPage-1] );
                    fiction_imageElement.src = page_images[currentPage-1];
                    console.log("Story image = ", page_images[currentPage-1] );


                }
                scrollToBottom()

            }
        });

        // Add event listener for the 'Previous' button
        document.getElementById('previous-button').addEventListener('click', () => {
            if (currentPage > 0) {
                const imageElement = document.getElementById('image');
                const fiction_imageElement = document.getElementById('page_image');

                currentPage--;
                document.getElementById('story-content').innerHTML = storyPages[currentPage];
                
                if(currentPage==0){
                    imageElement.src = images[9];
                    fiction_imageElement.src = page_images[9];

                }
                else{
                    console.log("Current page = ", currentPage-1);

                    imageElement.src = images[currentPage-1];
                    console.log("Graph image = ", images[currentPage-1] );

                    fiction_imageElement.src = page_images[currentPage-1];
                    console.log("Story image = ", page_images[currentPage-1] );


                }

                // document.getElementById('mermaid').innerHTML = mermaidCodeArray[currentPage];

            }
        });
            </script>

        </div>
        
    </div>
    
</body>
</html>
